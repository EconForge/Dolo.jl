symbols:
    states: [K, A_k, A_c]
    controls: [ξ, l, ζ__RDC]
    parameters: [α, β, at, ε_c, ε_k, ν, Ψ_c, Ψ_k, u, l_c_ss, l_k_ss, τ]
    exogenous: [D]

definitions:
    w_r[t]: (1-α)/α*K[t]/l[t]
    k_C[t]: ξ[t]*K[t]
    l_C[t]: ξ[t]*l[t]

    Y_c[t]: A_c[t]*k_C[t]^α*l_C[t]^(1-α) # k_C[t]/(α/(1-α)*w_r[t])^(1-α)*A_c[t]
    C[t]: Y_c[t]
    # l_C[t]: (α/(1-α)*w_r[t])^(-α)*A_c[t]^(-1)*C[t] #
    k_k[t]: K[t] - k_C[t]
    l_k[t]: l[t] - l_C[t]
    Y_K[t]: A_k[t]*k_k[t]^α*l_k[t]^(1-α)           #
    P[t]: 1
    w[t]: (ε_c-1)/(at*ε_c)*A_c[t]*w_r[t]^α
    r[t]: α/(1-α)*l[t]/K[t]*w[t]
    uc_k[t]: at*A_k[t]^(-1)*w[t]^(1-α)*r[t]^α
    uc_c[t]: at*A_c[t]^(-1)*w[t]^(1-α)*r[t]^α          #
    Q[t]: ε_k*at/(ε_k-1)*A_k[t]^(-1)*w[t]^(1-α)*r[t]^α   #
    π_c[t]: (P[t]-uc_c[t])*Y_c[t]
    π_c__p[t]: (ε_c-1)*π_c[t]/A_c[t]
    π_k[t]: (Q[t]-uc_k[t])*Y_K[t]
    π_k__p[t]: (ε_k-1)*π_k[t]/A_k[t]
    l_c__RD[t]: ζ__RDC[t]*(1-l[t])
    l_k__RD[t]: (1-ζ__RDC[t])*(1-l[t])
    ψ_c[t]:    Ψ_c*( l_c__RD[t] )^ν            #*u + (1-u)*Ψ_c
    ψ_c__p[t]: ν*Ψ_c*( l_c__RD[t] )^(ν-1)      #*u + (1-u)*0.001
    ψ_k[t]:    Ψ_k*( l_k__RD[t] )^ν            #*u + (1-u)*Ψ_k
    ψ_k__p[t]: ν*Ψ_k*( l_k__RD[t] )^(ν-1)      #*u + (1-u)*0.001
    μ[t]: w[t]/(A_c[t]*ψ_c__p[t])
    η[t]: w[t]/(A_k[t]*ψ_k__p[t])

equations:
    transition:
        - K[t] = Y_K[t-1]
        - A_k[t] = ψ_k[t-1]*A_k[t-1]
        - A_c[t] = ψ_c[t-1]*A_c[t-1]

    arbitrage:
        - Q[t]/C[t] = β*r[t+1]/C[t+1]*(1-τ)
        - Q[t]/r[t+1]*( ψ_c[t+1] + (π_c__p[t+1]*A_c[t+1]/w[t+1] - l_c__RD[t+1])*ψ_c__p[t+1] )*μ[t+1]/μ[t] - 1
        - Q[t]/r[t+1]*( ψ_k[t+1] + (π_k__p[t+1]*A_k[t+1]/w[t+1] - l_k__RD[t+1])*ψ_k__p[t+1] )*η[t+1]/η[t] - 1

domain:
    K: [0, 1]
    A_k: [0, 1]
    A_c: [0, 1]

calibration:

    τ: 0.0
    at: (α/(1-α))^(1-α)+(α/(1-α))^(-α)

    # K: (β/ε_k*(ε_k-1)/at)^(1/(1-α))*α/(1-α)*l
    K: (β/ε_k*(ε_k-1)/at)^(1/(1-α))*α/(1-α)*l

    A_k: 1.0
    A_c: 1.0

    # ξ: 1 - (1/A_k)^(1/α)*(K/l_k)^(1/α-1)
    ξ: 1 - 1/A_k*(K/l)^(1-α)

    ζ__RDC: 0.5
    μ: 1.0
    η: 1.0
    α: 0.5 # paper
    β: 0.95 # paper
    ν: 0.5
    l_k_ss: 0.05
    l_c_ss: 0.05
    l: 1 - l_k_ss - l_c_ss
    Ψ_c: 1.1 # 1.0 / l_c_ss^ν
    Ψ_k: 1.1 # 1.0 / l_k_ss^ν
    ε: 1.66
    ε_c: ε
    ε_k: ε
    u: 1.0

    D: 0.0

exogenous: 
    D: !UNormal
        σ: 0.000001